<html>
<head>
<link rel="stylesheet" type="text/css" href="databaseDisplay.css">
<script src="jquery-3.1.1.min.js"></script>
<script>
  function assignScanDisplay(element,caseNum){
		 $(element).click(function(){
		 console.log(caseNum);
			$.ajax({url:"displayCase.php",
					data: {"caseNum": caseNum},
			success: function(result){
			  if($("#caseInfo").children().length > 0){
			    console.log("Boom");
				$("#caseInfo").empty();
			  }
			  $("#caseInfo").append(result);
			  $("#caseInfo").show();
			}});
		 });
  }

  $(document).ready(function(){
	  var mainTable = document.getElementById("mainTable");
	  $.ajax({url:"./returnDBInfo.php",
	  success: function(result){
	    console.log(result);
		var dbRows = JSON.parse(result);
		console.log(dbRows);
		
		for(var i = 0; i < dbRows.length; i++){
			var newRow = mainTable.insertRow(-1);
			newRow.insertCell(-1).innerHTML = dbRows[i][0] + "-" + dbRows[i][1];
		  for(var j = 2; j < dbRows[i].length; j++){
		    newRow.insertCell(-1).innerHTML = dbRows[i][j];
		  }
		  assignScanDisplay(newRow,dbRows[i][1]);
		}
	  }});
  
	$("#caseInfo").click(function(){
	  $(this).hide();
	  $(this).empty();
	});
  });
</script>
</head>
<body>
<div id="caseInfo"></div>
<button style="float:right;clear:both;" onclick='history.go(-1);'>Back to Main Menu</button>
<table id="mainTable" style="float:right; clear:both;">
<th>Case No.</th><th>Plaintiff(s)</th><th>Defendant</th><th>Witness(es)</th><th>Charge</th><th>Status</th><th>Hearing Date</th><th>Verdict</th><th>Sentence</th><th>Sentence Status</th>
</table>
</body>
</html>