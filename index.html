<html>
<head>
<link rel="stylesheet" type="text/css" href="ComplaintForm.css">
<link rel="stylesheet" type="text/css" href="databaseDisplay.css">
<script src="jquery-3.1.1.min.js"></script>
<script src="ComplaintForm.js"></script>
<script src="DatabaseRow.js"></script>
<script>
  localStorage.removeItem("lastFormData"); 

  $(document).ready(function(){
		var mainTable = document.getElementById("mainTable");
	  var rowObjects = [];
		
		$("#updateDBButton").click(function(){	
			if(confirm('Are you sure?')){
				for(let i = 0; i < rowObjects.length; i++){
					rowObjects[i].sendChanges();
				}
			}
		});
		
		$.ajax({url:"./returnDBInfo.php",
	  success: function(result){
	    console.log(result);
			var dbRows = JSON.parse(result);
			console.log(dbRows);
		
			for(let i = 0; i < dbRows.length; i++){
				rowObjects.push(new DatabaseRow(dbRows[i],mainTable,rowObjects));
			}
		}});
		
			console.log("TABLE");
		console.dir(mainTable);
  
		$("#caseInfoClose").click(function(){
			$(this).parent().hide();
			$(this).siblings().children().remove();
		});
  });
</script>
</head>
<body>
<div id="contextMenu">Hi!</div>
<div id="caseInfo">
  <button id="caseInfoClose">Close</button>
  <div id="caseTarget"></div>
  <div id="scanTarget"></div>
</div>
<button style="float:right;clear:right;" onclick='window.location.href="newComplaint.php"'>Add New Complaint</button>
<button id="updateDBButton" style="float:right;clear:left;">Update Database</button>
<table id="mainTable" style="float:right; clear:both;">
<thead id="mainTableHead">
<th>Case No.</th><th>Plaintiff(s)</th><th>Defendant</th><th>Witness(es)</th><th>Charge</th><th>Status</th><th>Hearing Date</th><th>Verdict</th><th>Sentence</th><th>Sentence Status</th>
</thead>
<tbody>
</tbody>
</table>
</body>
</html>